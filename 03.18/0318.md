0318

MyBatis의 SQL(statement)을 찾는 키 
org.example.sp1.mapper.TimeMapper.after100
org.example.sp1.mapper.TimeMapper

인터페이스에 있으면 그걸 사용 

없으면 XML을 조사  XML의 namespace +  id 를 조사 

       <property name="mapperLocations" value="classpath:/mapper/*.xml"/>


MyBatis 개발시 주의 사항

* getter/setter 위주 개발 - MyBatis는 자동으로 getter/setter 호출 + Lombok을 이용하면 최소한의 코드로 개발 가능 

* 여러개의 값이나 파라미터은 가능하면 DTO,VO로 별도의 클래스 작성 추천 - Map을 이용할 수 있긴 함 

* DTO,VO 먼저 코딩 - 활용해서 resultType 으로 활용 

* 매퍼 인터페이스먼저 작성 / XML 추가 

* SQL은 먼저 다른 곳에서 문제 없는지 확인한 후에 XML에 추가

--------
새로운 bno가 만들어진 값을 알아야할 경우  - selectKey, useGeneratedKeys

SELECT LAST_INSERT_ID() 마지막으로 만들어진 auto_increment 값 


resultType에 full name(패키지명 + 클래스 명) 불편함 

type alias - MyBatis 설정이 필요  - Java,XML설정 

MyBatis의 두 가지 종류의 설정 문서 

MyBatis 자체의 설정(config)

mybatis-config.xml 

resultType  하나의 Row 를 어떻게 변환할 것인가를 명시 

목록을 뽑을 때에도 resultType은 동일 - 다만 인터페이스의 반환 타입만 다르게 

리스트, 수정, 삭제 

삭제 

soft delete  -컬럼값만 삭제로 표시 - 외래키 
hard delete -테이블의 레코드를 삭제  

웹 



매퍼 설정 

여러개의 파라미터를 사용하는 방법

- @Param(XML에서 사용하는 변수명) 

- DTO - getXXX - 데이터의 변환, 검증, 연산 가능 - 상속등을 이용하면 확장가능 
  다른 SQL 실행시에도 재사용이 가능 


- Map (키,값) @Param이 없던 시절에 쓰는 


http://localhost:8080/

main.jsp가 화면 깨지지 않고 출력 

-------------
과제 
todo 매퍼, 테스트 














